<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Author's Atlas</title>
  <meta name="description" content="Author's Atlas - Project Manager for Complex Writing Projects">
  <link rel="stylesheet" href="styles.css">
  <!-- Quill.js: Snow Theme CSS (official CDN) -->
  <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
</head>
<body class="theme-light">
  <header class="header" id="mainHeader">
    <div class="header__inner">
      <div class="header__left">
        <div class="header__logo">
          <svg width="32" height="32" viewBox="0 0 32 32" class="header__icon" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="16" cy="16" r="15" stroke="var(--color-primary)" stroke-width="2"/>
            <path d="M8 24L24 8" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round"/>
            <path d="M16 8V24" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round"/>
            <circle cx="16" cy="16" r="4" stroke="var(--color-primary)" stroke-width="2"/>
          </svg>
          <span class="header__title">Author's Atlas</span>
        </div>
        <nav class="topnav" aria-label="Main" id="mainNav">
          <a href="#/" class="topnav__link" id="nav-home">Home</a>
        </nav>
      </div>
      <div class="header__right">
        <button class="header__theme-toggle" id="themeToggle" title="Toggle Light/Dark Theme" aria-label="Toggle Light/Dark Theme">
          <svg id="themeIcon" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <circle class="theme-icon__sun" cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
            <path class="theme-icon__moon" d="M 15 12 a 4 4 0 1 1 -8 0 a 4 4 0 1 0 8 0" stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
        </button>
      </div>
    </div>
  </header>
  <main id="app" tabindex="-1" class="main-content-wrapper">
    <!-- Dynamic application content will be rendered by app.js -->
  </main>
  <div id="modal-root" aria-live="polite"></div>
  <footer class="footer">
    <div class="footer__inner">
      <span>&copy; <span id="year"></span> Author's Atlas</span>
      <span class="footer__reminder">
        <svg width="16" height="16" style="vertical-align:middle" viewBox="0 0 16 16" fill="none">
          <circle cx="8" cy="8" r="7" stroke="var(--color-primary)" stroke-width="2"/>
          <path d="M8 5V9" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round"/>
          <circle cx="8" cy="11.5" r="1" fill="var(--color-primary)"/>
        </svg>
        <span>All data stays in your browser. <strong>Export frequently</strong> for backup.</span>
      </span>
    </div>
  </footer>
  <!-- Quill.js: official CDN -->
  <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
  <script type="module" src="js/app.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Header/nav hide logic based on view
    function updateHeaderForView() {
      const hash = window.location.hash || '';
      const isManuscript = /^#\/project\/[^/]+\/manuscript/.test(hash);
      const header = document.getElementById('mainHeader');
      if (header) {
        if (isManuscript) {
          header.style.display = 'none';
        } else {
          header.style.display = '';
        }
      }
    }
    window.addEventListener('hashchange', updateHeaderForView);
    window.addEventListener('DOMContentLoaded', updateHeaderForView);
  </script>
</body>
</html>